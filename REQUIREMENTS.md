# 快速文件管理插件 - 需求文档

## 项目概述

### 程序定位
**键盘驱动的文本管理器** - 一个让用户能够不离开键盘完成简单文件管理操作的工具。

### 核心目标
- 提供高效的键盘操作体验
- 减少鼠标依赖，提升操作效率
- 实现基本的文件管理功能
- 保持界面简洁直观

### 目标用户
- 程序员、文本编辑者、效率追求者
- 习惯使用键盘操作的用户
- 需要快速文件管理的专业人士

---

## 界面设计

### 整体布局
```
┌─────────────────────────────────────────────────────────┐
│ 搜索框 [搜索输入区域]                                   │ ← Top区域
├─────────────────────────────────────────────────────────┤
│ 当前路径: C:/Users/Username/Documents/                  │ ← 路径显示区域
├───────────────┬─────────────────────────────────────────┤
│ 盘符列表      │ 文件列表                                │
│ • C:          │ 📄 document.txt                         │
│ • D:          │ 📁 Projects                             │
│ • E:          │ 📁 Downloads                            │
│ • F:          │ 📄 readme.md                            │
│               │ 📄 config.json                          │
│               │ 📁 Images                               │
│               │                                         │
│               │                                         │
└───────────────┴─────────────────────────────────────────┘
```

### 区域详细说明

#### 1. Top区域 - 搜索框
- **位置**: 界面最顶部
- **功能**: 全局文件搜索
- **特性**: 
  - 实时搜索（输入时即时显示结果）
  - 支持文件名模糊匹配
  - 搜索范围包括当前路径及子目录

#### 2. 路径显示区域
- **位置**: 搜索框下方
- **功能**: 显示当前浏览的文件路径
- **特性**:
  - 显示完整路径
  - 路径可点击跳转（键盘导航）
  - 支持路径历史导航

#### 3. 左侧栏 - 盘符列表
- **位置**: 界面左侧
- **功能**: 显示所有可用磁盘驱动器
- **特性**:
  - 显示盘符标签（C:, D:, E:等）
  - 显示磁盘空间使用情况
  - 支持键盘快速切换盘符

#### 4. 右侧栏 - 文件列表
- **位置**: 界面右侧（主要区域）
- **功能**: 显示当前路径下的文件和文件夹
- **特性**:
  - 文件和文件夹混合显示
  - 支持图标显示（文件类型图标）
  - 显示文件大小、修改时间等信息
  - 支持排序（按名称、大小、时间）

---

## 快捷键系统

### 配置文件
- **文件名**: `config.json`
- **位置**: 插件配置目录
- **功能**: 存储用户自定义快捷键配置

### 默认快捷键配置

#### 导航操作
- **W键**: 向上选择文件/文件夹
- **S键**: 向下选择文件/文件夹
- **A键**: 切换到左侧盘符列表
- **D键**: 切换到右侧文件列表
- **Enter键**: 进入文件夹或打开文件
- **Backspace键**: 返回上级目录

#### 文件操作
- **Ctrl+C**: 复制选中的文件/文件夹
- **Ctrl+V**: 粘贴到当前目录
- **Ctrl+X**: 剪切选中的文件/文件夹
- **Del键**: 删除选中的文件/文件夹
- **空格键**: 打开当前选中的单个文件（多选时无效）
- **Ctrl+E**: 使用系统文件管理器打开当前路径

#### 选择操作
- **Shift键**: 多选模式（按住Shift点击或导航可加选文件）
- **Ctrl+A**: 全选当前目录所有文件
- **Esc键**: 取消所有选择

#### 搜索操作
- **Ctrl+F**: 快速聚焦到搜索框
- **Esc键**（在搜索框）: 清除搜索内容

### 快捷键特性
- **可配置性**: 所有快捷键支持用户自定义
- **冲突检测**: 避免快捷键冲突
- **模式感知**: 不同界面区域有不同的快捷键映射
- **即时生效**: 修改配置后无需重启立即生效

---

## 核心功能需求

### 1. 文件浏览功能
- **目录导航**: 支持键盘快速浏览文件夹结构
- **路径显示**: 实时显示当前位置
- **盘符切换**: 快速在不同磁盘间切换
- **历史记录**: 记录浏览历史，支持前进后退

### 2. 文件搜索功能
- **实时搜索**: 输入关键词即时显示匹配文件
- **模糊匹配**: 支持部分匹配和通配符
- **范围控制**: 可设置搜索范围（当前目录/全磁盘）
- **结果高亮**: 搜索关键词在结果中高亮显示

### 3. 文件操作功能
- **基本操作**: 复制、剪切、粘贴、删除
- **批量操作**: 支持多选文件进行批量操作
- **文件预览**: 快速预览文本文件内容
- **快速打开**: 使用默认程序打开文件

### 4. 选择系统
- **单选模式**: 使用W/S键导航选择
- **多选模式**: 按住Shift进行多选
- **范围选择**: 支持连续范围选择
- **全选功能**: 快速选择所有文件

### 5. 配置系统
- **快捷键配置**: 用户可自定义所有快捷键
- **界面主题**: 支持明暗主题切换
- **显示设置**: 文件列表显示选项配置
- **搜索设置**: 搜索行为和范围配置

---

## 技术实现要点

### 界面实现
- 使用HTML/CSS实现响应式布局
- 左侧栏固定宽度，右侧栏自适应
- 支持键盘焦点管理
- 实现文件图标系统

### 文件操作
- 使用Node.js fs模块进行文件操作
- 异步处理大文件操作
- 实现操作进度显示
- 支持操作撤销功能

### 搜索优化
- 实现搜索索引建立
- 支持增量搜索
- 优化大目录搜索性能
- 实现搜索缓存机制

### 配置管理
- 使用JSON格式存储配置
- 实现配置验证机制
- 支持配置导入导出
- 提供配置重置功能

---

## 用户体验设计

### 键盘优先
- 所有功能都支持键盘操作
- 减少鼠标依赖
- 提供快捷键提示
- 支持操作流连贯性

### 视觉反馈
- 当前选中项高亮显示
- 操作状态实时反馈
- 进度显示和完成提示
- 错误信息友好提示

### 性能考虑
- 大目录加载优化
- 搜索响应速度优化
- 内存使用控制
- 操作取消支持

---

## 后续扩展可能

### 功能扩展
- 文件属性查看和编辑
- 文件内容搜索
- 压缩文件支持
- 网络路径支持

### 界面扩展
- 多标签页支持
- 分栏视图
- 自定义布局
- 插件系统

### 集成扩展
- 与代码编辑器集成
- 版本控制集成
- 云存储集成
- 命令行集成

---

## 版本规划

### 第一阶段（v1.0）
- 基础文件浏览功能
- 基本文件操作（复制、粘贴、删除）
- 默认快捷键系统
- 简单搜索功能

### 第二阶段（v1.1）
- 多选和批量操作
- 文件预览功能
- 配置系统完善
- 性能优化

### 第三阶段（v1.2）
- 高级搜索功能
- 主题系统
- 快捷键自定义
- 用户体验优化

---

**文档状态**: 需求定义完成  
**版本**: 需求文档 v1.0  
**更新时间**: 2026-01-21