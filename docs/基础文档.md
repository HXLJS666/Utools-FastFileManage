# 基础文档

## uTools 插件开发基础

uTools 是一个基于 Electron 构建的效率工具平台，允许开发者创建插件应用来扩展其功能。

## 插件应用架构

### 核心概念

1. **主进程 (Main Process)**
   - 运行在 Node.js 环境中
   - 可以访问系统原生 API
   - 负责插件生命周期管理

2. **渲染进程 (Renderer Process)**
   - 运行在 Chromium 浏览器环境中
   - 受沙箱限制，无法直接访问系统资源
   - 负责用户界面展示

3. **预加载脚本 (Preload Script)**
   - 连接主进程和渲染进程的桥梁
   - 可以调用 Node.js API 和 Electron 渲染进程 API
   - 通过 `window` 对象向渲染进程暴露安全接口

### 开发模式

```
渲染进程 (前端代码) ←→ 预加载脚本 ←→ 主进程 (Node.js)
    ↓
用户界面展示 ←→ 安全API调用 ←→ 系统资源访问
```

## 插件应用文件结构

一个标准的 uTools 插件应用应包含以下文件：

```
插件应用根目录/
├── plugin.json          # 插件配置文件
├── preload.js           # 预加载脚本
├── index.html           # 主界面文件
├── index.js             # 前端逻辑
├── index.css            # 样式文件
├── logo.png             # 插件图标
└── docs/                # 文档目录
```

## 开发环境要求

- **Node.js**: 16.x 版本
- **uTools**: 最新版本
- **操作系统**: Windows/macOS/Linux

## 插件生命周期

1. **安装**: 用户安装插件到 uTools
2. **启动**: 用户通过快捷键或搜索启动插件
3. **运行**: 插件在 uTools 窗口中运行
4. **退出**: 用户关闭插件窗口

## 安全限制

由于安全考虑，uTools 对插件应用有以下限制：

- 渲染进程运行在沙箱环境中
- 无法直接访问文件系统、网络等系统资源
- 必须通过预加载脚本访问系统能力
- 预加载脚本代码不能压缩/混淆

## 开发流程

1. **项目初始化**: 创建基本文件结构
2. **配置插件**: 编写 plugin.json 文件
3. **开发功能**: 实现预加载脚本和前端界面
4. **测试调试**: 在 uTools 中测试插件功能
5. **打包发布**: 提交插件到 uTools 应用市场

## 常用开发模式

### 1. 简单插件模式
适用于功能单一的插件，直接在预加载脚本中实现功能。

### 2. 复杂应用模式
适用于功能复杂的插件，可以引入第三方库和模块化开发。

### 3. 混合开发模式
结合 uTools API 和前端框架，实现丰富的用户界面。

## 注意事项

- 插件代码必须保持清晰可读
- 避免使用同步阻塞操作
- 合理处理错误和异常
- 遵循 uTools 的设计规范

---

**下一步**: 了解 [插件应用目录结构](插件应用目录结构.md)